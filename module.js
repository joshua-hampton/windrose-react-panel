/*! For license information please see module.js.LICENSE.txt */
define(["react","emotion","@grafana/data","@grafana/ui"],(function(e,t,n,a){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=4)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t){e.exports=a},function(e,t,n){"use strict";n.r(t);var a=n(2);function r(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,l=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(a=l.next()).done;)i.push(a.value)}catch(e){r={error:e}}finally{try{a&&!a.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return i}function l(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e}function i(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var o,s,u,c,d,p,m,f,g,h,b=n(0),v=n.n(b),x=n(1),y=n(3),O=Object(y.stylesFactory)((function(){return{wrapper:Object(x.css)(u||(u=i(["\n      position: relative;\n    "],["\n      position: relative;\n    "]))),svg:Object(x.css)(c||(c=i(["\n      position: absolute;\n      top: 0;\n      left: 0;\n    "],["\n      position: absolute;\n      top: 0;\n      left: 0;\n    "]))),textBox:Object(x.css)(d||(d=i(["\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      padding: 10px;\n    "],["\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      padding: 10px;\n    "]))),polarlines:Object(x.css)(p||(p=i(["\n      stroke: grey;\n      stroke-dasharray: 5 5;\n      fill: transparent;\n    "],["\n      stroke: grey;\n      stroke-dasharray: 5 5;\n      fill: transparent;\n    "]))),annotation:Object(x.css)(m||(m=i(["\n      fill: white;\n    "],["\n      fill: white;\n    "]))),legend:Object(x.css)(f||(f=i(["\n      text-align: center;\n      position: absolute;\n      right: 0;\n      top: 0;\n      width: 15%;\n    "],["\n      text-align: center;\n      position: absolute;\n      right: 0;\n      top: 0;\n      width: 15%;\n    "]))),legendBox:Object(x.css)(g||(g=i(["\n      border: solid 1px transparent;\n      height: 100%;\n      width: 4ex;\n      display: inline-block;\n    "],["\n      border: solid 1px transparent;\n      height: 100%;\n      width: 4ex;\n      display: inline-block;\n    "]))),legendText:Object(x.css)(h||(h=i(["\n      display: inline-block;\n      height: 100%;\n      vertical-align: middle;\n      padding-left: 0.75em;\n    "],["\n      display: inline-block;\n      height: 100%;\n      vertical-align: middle;\n      padding-left: 0.75em;\n    "])))}}));n.d(t,"plugin",(function(){return w}));var w=new a.PanelPlugin((function(e){var t,n=e.options,r=e.data,u=e.width,c=e.height,d=O(),p=r.series[0],m=p.fields.find((function(e){return"direction"===e.name})),f=p.fields.find((function(e){return"speed"===e.name}));if(!(null===(t=r.series)||void 0===t?void 0:t.length)||!m||!f)return v.a.createElement("div",{className:"panel-empty"},v.a.createElement("p",null,"No data found in response"));for(var g=Math.min(u,c)/2*.9,h=m.values.length,b=[],y=360/n.numberOfSegments,w=0;w<n.numberOfSegments;w++)b.push([]);for(var S=[],E=0;E<h;E++)if(f.values.get(E)>0){var j=Math.floor(m.values.get(E)/y+.5)%n.numberOfSegments;b[j].push(f.values.get(E)),S.push(f.values.get(E))}var N=Math.max.apply(Math,l(S.filter(Number.isFinite))),k=Math.ceil(N/n.windSpeedInterval),M=[],P=75/k;switch(n.palette){case"reds":for(var F=0;F<k;F++)M.push("hsl(20,100%,"+(95-P*F).toString()+"%)");break;case"greens":for(F=0;F<k;F++)M.push("hsl(106,51%,"+(95-P*F).toString()+"%)");break;case"blues":for(F=0;F<k;F++)M.push("hsl(210,100%,"+(95-P*F).toString()+"%)")}for(var Y=[],_=[],I=0;I<=k;I++){var B=n.windSpeedInterval*I;_.push(B)}var R=[];R.length=n.numberOfSegments,R.fill(0);var T=[];T.length=n.numberOfSegments,T.fill(0);for(I=0;I<k;I++){Y.push([]);for(j=0;j<n.numberOfSegments;j++){for(var V=b[j],D=0,H=0;H<V.length;H++)V[H]>=_[I]&&V[H]<_[I+1]&&D++;T[j]=V.length/h;var W=D/V.length*T[j];R[j]+=W,Y[I].push(W)}}var U=Math.max.apply(Math,l(R.filter(Number.isFinite))),K=Math.max.apply(Math,l(T.filter(Number.isFinite))),G=["N","NE","E","SE","S","SW","W","NW"];return v.a.createElement("div",{className:Object(x.cx)(d.wrapper,Object(x.css)(o||(o=i(["\n          width: ","px;\n          height: ","px;\n        "],["\n          width: ","px;\n          height: ","px;\n        "])),u,c))},v.a.createElement("svg",{className:d.svg,width:u,height:c,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"-"+u/2+" -"+c/2+" "+u+" "+c},v.a.createElement("g",{id:"lines"},v.a.createElement("g",{id:"proportionLines"},[1,.8,.6,.4,.2].map((function(e,t){return v.a.createElement("g",{style:{transform:"rotate("+-180/G.length+"deg)"}},v.a.createElement("circle",{className:d.polarlines,r:g*e}),v.a.createElement("text",{x:"0",y:g*e*1.025,"text-anchor":"middle",className:d.annotation},(K*e*100).toFixed(1),"%"))}))),v.a.createElement("g",{id:"cardinals",style:{transform:"rotate("+(90+n.rotation)+"deg)"}},G.map((function(e,t){return v.a.createElement("g",{style:{transform:"rotate("+360/G.length*t+"deg)"}},v.a.createElement("line",{x1:"0",y1:"0",x2:"0",y2:-g,className:d.polarlines}),v.a.createElement("g",null,v.a.createElement("text",{x:"0",y:1.025*-g,"text-anchor":"middle",className:d.annotation},e)))})))),Y.map((function(e,t){return v.a.createElement("g",{id:"bin"+t},e.map((function(e,a){var r=0;return Y.slice(0,t).forEach((function(e){r+=e[a]})),r=(r+=e/2)/U*g,v.a.createElement("circle",{r:r,className:"petal"+a+"_"+b[a].length,style:{fill:"transparent",transform:"rotate("+(y*a-y/2+n.rotation)+"deg)"},stroke:M[t],"stroke-width":e/U*g,"stroke-dasharray":y/360*r*2*3.14159+" "+2*r*3.14159})})))}))),v.a.createElement("div",{className:d.textBox},v.a.createElement("div",null,"From ",Object(a.dateTimeFormat)(r.timeRange.from,{format:"YYYY-MM-DD HH:mm"})," to"," ",Object(a.dateTimeFormat)(r.timeRange.to,{format:"YYYY-MM-DD HH:mm"}))),v.a.createElement("div",{className:d.legend},v.a.createElement("h3",null,"Speed / ",n.speedUnit),_.slice(0,k).map((function(e,t){return v.a.createElement("div",{id:"legend_"+t,style:{height:"4ex"}},v.a.createElement("div",{className:Object(x.cx)(d.legendBox,Object(x.css)(s||(s=i(["\n                    background-color: ",";\n                  "],["\n                    background-color: ",";\n                  "])),M[t]))}),v.a.createElement("p",{className:d.legendText},e," ",e>0?"≤":"<"," ",v.a.createElement("span",{style:{fontStyle:"italic"}},"v")," <"," ",_[t+1]))}))))})).setPanelOptions((function(e){return e.addRadio({path:"palette",name:"Palette",defaultValue:"greens",settings:{options:[{value:"reds",label:"Red"},{value:"greens",label:"Green"},{value:"blues",label:"Blue"}]}}).addNumberInput({path:"numberOfSegments",name:"Number of Segments",defaultValue:16}).addNumberInput({path:"windSpeedInterval",name:"Wind Speed Interval",defaultValue:2}).addSelect({path:"speedUnit",name:"SpeedUnit",defaultValue:"ms¯¹",settings:{options:[{value:"ms¯¹",label:"Metres per second"},{value:"kmh¯¹",label:"Kilometres per hour"},{value:"mph",label:"Miles per hour"},{value:"kts",label:"Knots"}]}}).addNumberInput({path:"rotation",name:"Rotate Rose degrees (-90° is North at the top)",defaultValue:-90})}))}])}));
//# sourceMappingURL=module.js.map